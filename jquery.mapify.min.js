(function(e){"use strict";var n=false;var o=false;var t=function(){if(typeof google==="undefined"||typeof google.maps==="undefined"){return false}return true};var i=function(o,t,n,e){if(o()){return t()}n=n||100;e=e||false;var a=setInterval(function(){if(o()){t();clearInterval(a)}},n);if(e){var r=setTimeout(function(){clearInterval(a)},e)}};var f=function(n){var e=google.maps.MapTypeId;if(e.hasOwnProperty(n)){return e[n]}for(var o in e){if(e[o]===n){return n}}return e.ROADMAP};var a=function(e,t,n,o){e.fitBounds(t);if(n.hasOwnProperty("lat")&&n.hasOwnProperty("lng")){e.addListener("bounds_changed",function(){e.setCenter(n)})}if(o){e.addListener("bounds_changed",function(){e.setZoom(o)})}};var s=function(r,n){var o=new google.maps.Map(r,{mapTypeId:f(n.type)});var t=new google.maps.LatLngBounds;e.each(n.points,function(i,e){var a;var n;var r;if(!e.hasOwnProperty("lat")||!e.hasOwnProperty("lng")){return false}a=new google.maps.LatLng({lat:e.lat,lng:e.lng});if(e.marker){n=new google.maps.Marker({map:o,position:a});if(typeof e.marker==="string"){n.setIcon(e.marker)}if(e.title){n.setTitle(e.title)}if(e.infoWindow){r=new google.maps.InfoWindow({content:e.infoWindow});n.addListener("click",function(){r.open(o,n)})}}t.extend(a)});a(o,t,n.center,n.zoom);if(n.responsive){e(window).on("resizeDone",function(){a(o,t,n.center,n.zoom)})}if(n.callback){n.callback(o,t,n)}};var r=function(e,n){i(t,function(){e.each(function(o,e){s(e,n)})},50,4e3)};e.fn.mapify=function(i){var n=this;var a=e.extend({points:[],type:"roadmap",center:false,zoom:false,responsive:false,callback:false},i);if(!t||!o){o=true;e.getScript("//maps.google.com/maps/api/js",function(){r(n,a)})}else{r(n,a)}};e(window).on("resize",function(){clearTimeout(n);n=setTimeout(function(){e(window).trigger("resizeDone")},100)})})(jQuery);
