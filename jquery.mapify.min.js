(function(e){"use strict";var n=false;var t=false;var o=false;var r=function(){if(typeof google==="undefined"||typeof google.maps==="undefined"){return false}return true};var a=function(e,n,t,o){if(e()){return n()}t=t||100;o=o||false;var r=setInterval(function(){if(e()){n();clearInterval(r)}},t);if(o){var a=setTimeout(function(){clearInterval(r)},o)}};var i=function(e){var n=google.maps.MapTypeId;if(n.hasOwnProperty(e)){return n[e]}for(var t in n){if(n[t]===e){return e}}return n.ROADMAP};var f=function(e,n,o,r){e.fitBounds(n);if(o.hasOwnProperty("lat")&&o.hasOwnProperty("lng")){e.addListener("bounds_changed",function(){e.setCenter(o)})}if(r){e.addListener("bounds_changed",function(){if(t){return}e.setZoom(r);t=true})}};var s=function(n,o){var r=new google.maps.Map(n,{mapTypeId:i(o.type)});var a=new google.maps.LatLngBounds;e.each(o.points,function(e,n){var t;var o;var i;if(!n.hasOwnProperty("lat")||!n.hasOwnProperty("lng")){return false}t=new google.maps.LatLng({lat:n.lat,lng:n.lng});if(n.marker){o=new google.maps.Marker({map:r,position:t});if(typeof n.marker==="string"){o.setIcon(n.marker)}if(n.title){o.setTitle(n.title)}if(n.infoWindow){i=new google.maps.InfoWindow({content:n.infoWindow});o.addListener("click",function(){i.open(r,o)})}}a.extend(t)});f(r,a,o.center,o.zoom);if(o.responsive){e(window).on("resizeDone",function(){t=false;f(r,a,o.center,o.zoom)})}if(o.callback){o.callback(r,a,o)}};var l=function(e,n){a(r,function(){e.each(function(e,t){s(t,n)})},50,4e3)};e.fn.mapify=function(n){var t=this;var a=e.extend({points:[],type:"roadmap",center:false,zoom:false,responsive:false,callback:false},n);if(!r||!o){o=true;e.getScript("//maps.google.com/maps/api/js",function(){l(t,a)})}else{l(t,a)}};e(window).on("resize",function(){clearTimeout(n);n=setTimeout(function(){e(window).trigger("resizeDone")},100)})})(jQuery);
