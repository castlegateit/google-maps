!function(t,e,n,o){"use strict";var i="mapify",a={callback:!1,center:!1,key:!1,options:{},points:[],responsive:!1,zoom:!1},s="mapifyWindowResized",r=!1,p=function(e,n){this.element=e,this.options=t.extend({},a,n),this._defaults=a,this._name=i,this._centered=!1,this._zoomed=!1,this.init()};p.loaded=!1,p.prototype.init=function(){this._styles=t(this.element).attr("style"),this._content=t(this.element).html(),this.load()},p.prototype.load=function(){if("undefined"!=typeof google&&"undefined"!=typeof google.maps)return p.loaded=!0,this.draw();if("undefined"==typeof e.mapifyMaps&&(e.mapifyMaps=[]),e.mapifyMaps.push(this),!p.loaded){var n="//maps.googleapis.com/maps/api/js";n+="?v=3.31",n+="&callback=mapifyInit",n=n+"&key="+this.options.key,t.getScript(n),p.loaded=!0}},p.prototype.draw=function(){var n=this;n.map=new google.maps.Map(n.element),n.bounds=new google.maps.LatLngBounds,n.map.setOptions(n.options.options),t.each(n.options.points,function(t,e){n.insertPoint(e)}),n.zoom(),n.options.responsive&&t(e).on(s,function(){n.zoom()}),n.options.callback&&n.options.callback(n)},p.prototype.zoom=function(){var t=this,e=t.options.center,n=t.options.zoom;t.map.fitBounds(t.bounds),e&&"undefined"!=typeof e.lat&&"undefined"!=typeof e.lng&&(t.map.setCenter(e),t.map.addListener("bounds_changed",function(){t._centered||(t.map.setCenter(e),t._centered=!0)})),n&&(t.map.setZoom(n),t.map.addListener("bounds_changed",function(){t._zoomed||(t.map.setZoom(n),t._zoomed=!0)}))},p.prototype.insertPoint=function(e){var n=this,o=t.extend({lat:!1,lng:!1,marker:!1,title:!1,infoWindow:!1},e);if(o.lat&&o.lng){var i=new google.maps.LatLng({lat:o.lat,lng:o.lng});if(n.bounds.extend(i),o.marker){var a=new google.maps.Marker({map:n.map,position:i});if("string"===t.type(o.marker)&&a.setIcon(o.marker),o.title&&a.setTitle(o.title),o.infoWindow){var s=new google.maps.InfoWindow({content:o.infoWindow});a.addListener("click",function(){s.open(n.map,a)})}}}},p.prototype.remove=function(){var e=t(this.element);e.html(this._content),e.attr("style",this._styles)},p.prototype.destroy=function(){this.remove(),t.removeData(this.element,i)},t.fn[i]=function(e){var n=this;if("instance"===n.options){var o=[];return n.each(function(){o.push(t.data(n,i))}),1===o.length?o[0]:o}return n.each(function(){var n=t.data(this,i);if("string"===t.type(e)){if("undefined"==typeof n)return;switch(e){case"redraw":return n.draw();case"remove":return n.remove();case"destroy":return n.destroy();default:return}}"undefined"==t.type(n)&&(n=new p(this,e),t.data(this,i,n))}),n},e.mapifyInit=function(){"undefined"!=typeof e.mapifyMaps&&t.each(e.mapifyMaps,function(t,e){e.draw()})},t(e).on("resize",function(){e.clearTimeout(r),r=setTimeout(function(){t(e).trigger(s)},100)})}(jQuery,window,document);